{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/index.css' %}" type="text/css">
    <title>Video chat</title>
</head>
<body class="bg-dark">
    <!-- header-->
      <header class="p-3 bg-dark text-ba border-bottom">
        <div class="container">
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
              <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"></use></svg>
            </a>
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
              <li> <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-camera-reels" viewBox="0 0 16 16">
                <path d="M6 3a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM1 3a2 2 0 1 0 4 0 2 2 0 0 0-4 0z"/>
                <path d="M9 6h.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 7.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 16H2a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h7zm6 8.73V7.27l-3.5 1.555v4.35l3.5 1.556zM1 8v6a1 1 0 0 0 1 1h7.5a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1z"/>
                <path d="M9 6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zM7 3a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"/>
                   </svg> 
            </li>
              <li> <h2 class="text-light"> Video chat</h2> </li>
            </ul>
            <h4 class="text-light" style="margin-right:15px; margin-top: 10px;">username</h4> 
            <div class="text-end">
              <!-- <button type="button" class="btn btn-dark me-2 border-light">Login</button> -->
              <button type="button" class="btn btn-success">Logout</button>
           </div>
         </div>
        </div>
      </header>


      <!-- main part -->
      
      <!-- Generate code -->
      <div class="container py-4" style="position: absolute; top: 50%; left: 15%; transform: translate(0, -50%);">
      <div class="row align-items-md-stretch">
        <div class="col-md-6">
          <div class="h-100 p-5 text-white text-bg-success rounded-3">
            <h2>Create a meeting</h2>
            <p>If you want to create your own room, please press the button down below, it will generate code for your room.</p>
            <button class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#exampleModalCenter" id="generate">Create a Meeting</button>
          </div>
        </div>
        <!-- Join the meeting -->
        <div class="col-md-6">
          <div class="h-100 p-5 bg-dark border rounded-3">
            <h2 class="text-light">Join the meeting</h2>
            <form action="/meeting/" method="post">
              {% csrf_token %}
            <input type="text" class="form-control input-lg" placeholder="Enter a code of the room..." name="room_code">
            <input type="submit" class="btn btn-dark border-light" style="margin-top: 10px" value="Join the meeting">
            </form>
          </div>
        </div>
      </div>
    </div>



<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content bg-dark">
      <div class="modal-header border-dark">
        <h5 class="modal-title text-light" id="exampleModalLongTitle">Link to your meeting</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </button>
      </div>
      <div class="modal-body text-light text-center border-danger" id="modal_body">
          <pre id="link"></pre>
      </div>
      <div class="modal-footer border-dark">
        <button type="button" class="btn btn-dark border-light" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>


    <!-- <script href="{% static 'js/generate_code.js' %}" type="text/javascript"></script> -->
    <script src="https://github.com/fent/randexp.js/releases/download/v0.4.3/randexp.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy" crossorigin="anonymous"></script>    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <!-- Returning random url  -->
    <script type="text/javascript">
        $("#generate").click(function () {
            var link =  new RandExp(/^https:\/\/localhost:8000\/[a-z]{3}-[a-z]{3}-[a-z]{3}\//).gen();
            console.log(link);
            $("#modal_body").html(link);
        });
      </script>
</body>
</html>

<!-- pop up -->